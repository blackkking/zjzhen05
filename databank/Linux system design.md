[TOC]

# Linux系统程序设计

## 计算机系统概论

操作系统利用一个或多个处理器的硬件资源，为系统用户提供一组服务，它还代表用户来管理辅助存储器和输入/输出(I/O)设备。因此，在开始分析操作系统之前掌握一些底层的计算机系统硬件知识是很重要的。

### 基本构成

从最顶层看，一台计算机由处理器，存储器和输入/输出部件组成，每一个部件有一个或多个模块。这些部件以某种方式互联，以实现计算机执行程序的主要功能。因此，计算机有四个主要的结构化部件：

- 处理器(processor)：控制计算机的操作，执行数据处理功能。当只有一个处理器是，它通常是指中央处理器(CPU)
- 主存储器(main memory): 存储数据和程序。此类存储器通常是易失性的，即当计算机关机时，它的内容不会丢失。主存储通常也称为实存储器(real memory)或主存储器(primary memory)
- 输入/输出模块(I/O modules): 在计算机和外部环境之间移动数据。外部环境由各种外部设备组成，包括二级存储器设备(如硬盘),通信设备和终端。
- 系统总线(System bus):为处理器，主存储器和输入/输出模块间提供通信的设施

### 处理器寄存器

处理器包括一组寄存器，它们提供一定的存储能力，比主存储器访问速度快，但比主存储器的容量小。处理器中的寄存器有两个功能

- 用户可见寄存器：优先使用这些寄存器，可以使机器语言或汇编语言的程序员减少对主存储器的访问次数。对高级语言而言，由优化编译器负责决定哪些变量应该分配给寄存器，哪些变量应该分配给主存储器，一些高级语言允许程序员建议编译器把哪些变量保存在寄存器中
- 控制和状态寄存器：用以控制处理器的操作，且主要被具有特权的操作系统历程使用，以控制程序的执行。


## 基本文件I/O

### 文件与文件访问基本概念

#### Linux文件分类

Linux文件是对大多数系统资源访问的接口。

- 普通文件(regular file)：用户可以看到的文件，有文本文件和二进制文件ls-l 第一个显示的字符是“-”
- 目录文件(directory),管理和组织系统的大量文件。"d"
- 设备文件。Linux把每一个I/O设备都看成一个文件."c" "b"
- 管道文件(named pipe),主要用于在进程传递数据。管道文件又称先进先出(FIFO)文件 "p"
- 套接字文件(socket).类似于管道文件.管道文件用于本地通信。而套接字允许网络上的通信 "s"
- 符号链接文件(stmbolic link),这个文件包含了另一个文件的陆建明。被链接的文件可以是任意文件和目录，可以链接不同文件系统的文件，"l"

#### 文件的相关最基本元素

- 目录结构。系统中的每一个目录都处于一定的目录结构当中。目录结构含有目录中所有目录的列表，每个目录项都含有一个文件名称和一个索引节点，借助于名称，应用程序可以访问目录项的内容，而索引节点提供了文件自身的信息。所以，目录只是将文件的名称和它的索引号结合在一起的一张表，目录中每一对文件名称和索引节点号，却可以有多个文件名与之对应。因此，在磁盘上的同一个文件可以通过不同的路径去访问它。
- 索引节点。目录结构包含文件名称和目录位置等信息，而索引节点本身并不包含这些信息，因此Linux允许使用多个文件名来引用磁盘上的同一块数据，多个文件名都可以访问同一个索引节点。
- 文件的数据。它的存储位置由索引节点指定，有这些特殊文件，比如管道及设备文件。在硬盘上不具有数据区域。而普通文件和目录都拥有数据区域。



